<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>添加流水席</title>
		<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
		<script src="js/mui.min.js"></script>
		<script type="text/javascript" src="js/style.js"></script>
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="css/base.css" />
		<script type="text/javascript" charset="utf-8">
			mui.init();
		</script>
	</head>

	<body>
		<div class="box">
			<div class="addliushuixi">
				<div class="container">
					<!--    照片添加    -->
					<div class="z_photo">
						<div class="z_file">
							<input type="file" name="file" id="file" value="" accept="image/*" multiple onchange="imgChange('z_photo','z_file');" />
						</div>
					</div>

					<!--遮罩层-->
					<div class="z_mask">
						<!--弹出框-->
						<div class="z_alert">
							<p>确定要删除这张图片吗？</p>
							<p>
								<span class="z_cancel">取消</span>
								<span class="z_sure">确定</span>
							</p>
						</div>
					</div>
				</div>
				<!---->
				<div class="tianjia_mingcehn">
					<span>名称</span>
					<input type="text" placeholder="请输入菜品名称" />
				</div>
				<div class="tianjia_mingcehn">
					<span>类别</span>
					<a href="index3_leibie.html"><label>中餐</label><i class="lefig"><img src="img/leftimg.png"></i></a>
				</div>
				<div class="tianji_tishi">
			 	   	   <span>菜品</span>
			 	   	   <label>* 菜品的价格不会作为实际价格结算，只作展示用</label>
			 	</div>
				<div class="caipinbox">
					 <div class="tianjia_caipingbox">
					 	<span class="caiage_ming cai_namgeboxsize">特色北京烤鸭特色北京烤鸭特色北京烤鸭</span>
					 	<span>
					 		<div class="mui-numbox jainbtnan" data-numbox-step='1' data-numbox-min='0' data-numbox-max='100'>
								<button class="mui-btn mui-numbox-btn-minus jiabtnboxpage1" type="button">-</button>
								<input class="mui-numbox-input shuliang" type="number" />
								<button class="mui-btn mui-numbox-btn-plus jiabtnboxpage2" type="button">+</button>
							</div>
					 	</span> 
					 	<input type="hidden" class="price" value="198" />
					 	<span class="caiage_jiage cai_namgeboxsize">￥<label class="jiagemory">198</label></span> 
					 </div>
					 <div class="tianjia_caipingbox">
					 	<span class="caiage_ming cai_namgeboxsize">特色北京烤鸭</span>
					 	<span>
					 		<div class="mui-numbox jainbtnan" data-numbox-step='1' data-numbox-min='0' data-numbox-max='100'>
								<button class="mui-btn mui-numbox-btn-minus jiabtnboxpage1" type="button">-</button>
								<input class="mui-numbox-input shuliang" type="number" />
								<button class="mui-btn mui-numbox-btn-plus jiabtnboxpage2" type="button">+</button>
							</div>
					 	</span>
					 	<input type="hidden" class="price" value="198" />
					 	<span class="caiage_jiage cai_namgeboxsize">￥<label class="jiagemory">198</label></span> 
					 </div> 
				</div>
				<!--加减符号-->
				<div class="jiajianbtn">
					<a href="tianjiacaipin.html" class="jaiimg"><img src="img/bianjijia.png"/></a>
					<a href="shanchucaipin.html" class="jaiimg"><img src="img/jianbtn.png"/></a>
				</div> 
			</div>
            <div class="xiayibubtn"><a href="tianjialiushuixi_xiayibu.html">下一步</a></div>
		</div>
	</body>
	<script type="text/javascript">
		$(function() {
			$(".jiabtnboxpage2").click(function() { 
				setAmountCount($(this),$(this).parents('.tianjia_caipingbox').eq(0).find('.jiagemory').eq(0));
			});
			$(".jiabtnboxpage1").click(function() { 
				setAmountCount($(this),$(this).parents('.tianjia_caipingbox').eq(0).find('.jiagemory').eq(0));
			}); 
			
       		/*价格，人数，总价*/
		    $(".renshubtnj2").click(function(){
		    	 setageout();
		    	
		    })
			
			
		});
		
		/*菜品数量*单价*/
		function setAmountCount(Obj,textObj){
				var jiagemoryobj=parseInt(Obj.parents('.tianjia_caipingbox').eq(0).find('.price').val());
				var shuliang = Obj.siblings("input").val(); 
				textObj.text(shuliang*jiagemoryobj);
			}
		
		
		//px转换为rem
		(function(doc, win) {
			var docEl = doc.documentElement,
				resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
				recalc = function() {
					var clientWidth = docEl.clientWidth;
					if(!clientWidth) return;
					if(clientWidth >= 640) {
						docEl.style.fontSize = '100px';
					} else {
						docEl.style.fontSize = 100 * (clientWidth / 640) + 'px';
					}
				};

			if(!doc.addEventListener) return;
			win.addEventListener(resizeEvt, recalc, false);
			doc.addEventListener('DOMContentLoaded', recalc, false);
		})(document, window);

		function imgChange(obj1, obj2) {
			console.log(1)
			//获取点击的文本框
			var file = document.getElementById("file");
			//存放图片的父级元素
			var imgContainer = document.getElementsByClassName(obj1)[0];
			//获取的图片文件
			var fileList = file.files;
			//文本框的父级元素
			var input = document.getElementsByClassName(obj2)[0];
			var imgArr = [];
			//遍历获取到得图片文件
			for(var i = 0; i < fileList.length; i++) {
				var imgUrl = window.URL.createObjectURL(file.files[i]);
				imgArr.push(imgUrl);
				var img = document.createElement("img");
				img.setAttribute("src", imgArr[i]);
				var imgAdd = document.createElement("div");
				imgAdd.setAttribute("class", "z_addImg");
				imgAdd.appendChild(img);
				imgContainer.appendChild(imgAdd);
			};
			imgRemove();
		};

		function imgRemove() { 
			var imgList = document.getElementsByClassName("z_addImg");
			var mask = document.getElementsByClassName("z_mask")[0];
			var cancel = document.getElementsByClassName("z_cancel")[0];
			var sure = document.getElementsByClassName("z_sure")[0];
			for(var j = 0; j < imgList.length; j++) {
				imgList[j].index = j;
				imgList[j].onclick = function() {
					console.log(1)
//					var t = this;
//					mask.style.display = "block";
					cancel.onclick = function() { 
						mask.style.display = "none";
					};
					sure.onclick = function() { 
						mask.style.display = "none";
						t.style.display = "none";
					};

				}
			};
		};
	 
		
		
		
	</script>

</html>