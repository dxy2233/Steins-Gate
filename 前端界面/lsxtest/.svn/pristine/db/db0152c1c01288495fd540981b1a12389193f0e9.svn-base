<?php
/**
 * Created by PhpStorm.
 * User: Administrator
 * Date: 2017/9/12
 * Time: 9:27
 */
namespace app\modules\banquet\controllers;

use app\modules\banquet\models\ShopbanqueDo;
use yii\web\Controller;

class ShopbanquetController extends Controller{

    public $layout = false;

    public function __construct ($id, $module, $config = [])
    {
        $module = \Yii::$app->getModule('banquet');
        parent::__construct($id, $module, $config);
    }

    public function actionList (){
        $post=[
            'banquet_name'=>'',
            'shop_name'=>'',
            'banquet_id'=>'',
            'type_id'=>''
        ];
//        echo 233;die();
        if(posts())
        {

            $post=posts();
//            var_dump($post);die();
            $fileter=ShopbanqueDo::ShopbanqueList($post);
            $post=$fileter['post'];

        } elseif(gets())
        {
            $post=gets('post');

            $fileter=ShopbanqueDo::ShopbanqueList($post);
            $post=$fileter['post'];
        }
        else
        {
            $fileter=ShopbanqueDo::ShopbanqueList();
        }


        $page=$fileter['page'];
        $data=$fileter['data'];
        $type=$fileter['type'];

        return $this->render('list.tpl',['data'=>$data,'page'=>$page,'post'=>$post,'type'=>$type]);

    }
    public function actionInfo()
    {
        $id=gets('id');
        $data=ShopbanqueDo::ShopbanqueInfo($id);
        $data['banquet_url']=imageurl($data['banquet_url']);
        $fileter=ShopbanqueDo::BanquetmenuInfo($id);
        $rows=$fileter['data'];
//        var_dump($data);die();
        $page=$fileter['page'];
        return $this->render('info.tpl',['data'=>$data,'page'=>$page,'rows'=>$rows]);
    }

}