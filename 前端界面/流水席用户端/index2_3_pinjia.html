<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>评价</title>
    <script type="text/javascript" src="js/jquery-1.8.3.min.js" ></script>
    <script type="text/javascript" src="js/style.js" ></script>
    <script src="js/mui.min.js"></script>
    <script type="text/javascript" src="js/base.js" ></script>
    
    <link href="css/mui.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/index.css" />
    
    <script type="text/javascript" charset="utf-8">
      	mui.init();
    </script>
</head>
<body>
	<div class="box">
		 <div class="pingjaiage">
		 	<div class="xinji"><span class="pinfennam">总分</span>
		 		<span class="xiji stars">
		 			<label></label>
		 			<label></label>
		 			<label></label>
		 			<label></label>
		 			<label></label>
		 			<input type="hidden"/> 
		 		</span>
		 	</div>
		 	<div class="titext">
		 		 <textarea placeholder="菜味道如何，服务是否周到，环境怎么样？"></textarea>
		 	</div> 
		 </div>
		 <div class="tupian">
		     <!--<input type="submit" class="tijiaopin" value="提交评论" />-->
		     <a href="index2_3_ganxiepinjia.html">提交评论</a>
		 </div>
	</div>
</body>
<script>
	$(function(){
	  
        /*
        * 鼠标点击，该元素包括该元素之前的元素获得样式,并给隐藏域input赋值
        * 鼠标移入，样式随鼠标移动
        * 鼠标移出，样式移除但被鼠标点击的该元素和之前的元素样式不变
        * 每次触发事件，移除所有样式，并重新获得样式
        * */
        var stars = $('.stars');
        var Len = stars.length;
        //遍历每个评分的容器
        for(i=0;i<Len;i++){
            //每次触发事件，清除该项父容器下所有子元素的样式所有样式
            function clearAll(obj){
                obj.parent().children('label').removeClass('on');
            }
            stars.eq(i).find('label').click(function(){
                var num = $(this).index();
                clearAll($(this));
                //当前包括前面的元素都加上样式
                $(this).addClass('on').prevAll('label').addClass('on');
                //给隐藏域input赋值
                $(this).siblings('input').val(num+1);
            });
            stars.eq(i).find('label').mouseover(function(){
                var num = $(this).index();
                clearAll($(this));
                //当前包括前面的元素都加上样式
                $(this).addClass('on').prevAll('label').addClass('on');
            });
            stars.eq(i).find('label').mouseout(function(){
                clearAll($(this));
                //触发点击事件后input有值
                var score = $(this).siblings('input').val();
                for(i=0;i<score;i++){
                    $(this).parent().find('label').eq(i).addClass('on');
                }
            });
        }
    })

	
</script>
</html>